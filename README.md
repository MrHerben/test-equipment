# Минимальное веб-приложение для работы с сущностью «оборудование»
Тестовое задание от К Телеком

# ТЗ
## Backend
Необходимо реализовать REST API интерфейс для работы с сущностью
«оборудование».


| # | Роут | Действие | Обязательно |
| - | ---- | -------- | ----------- |
| 1 | GET:/api/equipment | Вывод пагинированного списка оборудования с возможностью поиска путем указания query параметров советующим ключам объекта, либо указанием параметра q | Да |
| 2 | GET:/api/equipment/{id} | Запрос данных по id | Да |
| 3 | POST:/api/equipment | Создание новой(ых) записи(ей) | Да |
| 4 | PUT:/api/equipment/{id} | Редактирование записи по id | Да |
| 5 | DELETE:/api/equipment/{id} | Удаление записи (мягкое удаление) | Да |
| 6 | GET:/api/equipment-type | Вывод пагинированного списка оборудования с возможностью поиска путем указания query параметров советующим ключам объекта, либо указанием параметра q | Да |
| 7 | POST:/api/user/login | Авторизация пользователя (выпуск токена) | Нет

Для хранения информации об оборудовании в базе данных используется 2
таблицы (использовать MySQL и работу с миграциями):

1. «Тип оборудования» поля: ID, наименование типа, маска серийного номера.
2. «Оборудование» поля: ID, id типа оборудования, серийный номер (уникальное
поле в связке с типом оборудования), примечание.

При создании новых записей в поле «серийный номер» интерфейс принимает
массив номеров каждый из которых валидируется на соответствие маске и отсутствие
в таблице «оборудование» в качестве уникального ключа. Создание может быть как
по одному объекту, так и коллекция (на входе json-массив).
Если «серийный номер» не проходит валидацию, по нему формируется
соответствующие сообщение, которое возвращает интерфейс, после обработки всего
массива номеров.


| id | Тип оборудования | Маска SN |
| -- | ---------------- | -------- |
| 1 | TP-Link TL-WR74  | XXAAAAAXAA |
| 2 | D-Link DIR-300 | NXXAAXZXaa |
| ... | ... | ... |
| 100500 | D-Link DIR-300 E | NAAAAXZXXX |

**Где:**

* N – цифра от 0 до 9;
* A – прописная буква латинского алфавита;
* a – строчная буква латинского алфавита;
* X – прописная буква латинского алфавита либо цифра от 0 до 9;
* Z –символ из списка: “-“, “_”, “@”.

**Обязательные требования:**
1. использование фреймворка CherryPy, Django
2. использование методов валидации данных для всех методов создания и
обновления
3. все ответы API должны использовать API Resources/Collections (DTO Pattern)

**Дополнительные требования:**
1. все запросы API должны быть авторизованы (проверка Bearer Authentication)
2. наличие Docstring для всех методов
3. вся бизнес-логика манипуляции с данными должна быть инкапсулирована в
моделях и сервисном слое приложения (контроллеры должны быть плоскими)

## Frontend
Для отображения сделать минимальное SPA-приложение с использованием
Vue.js/Nuxt JS, работающее с разработанным API.

**Форма добавления записей, содержащая:**
1. Список «Тип оборудования» (id типа) select.
2. поле «Серийные номера» input-text/textarea.
3. Поле «Примечание» textarea
4. Кнопка «Добавить».

**Форма(ы) поиска, редактирования и удаления записей:**
1. Поисковая строка input-text, для поиска по серийному номеру/примечанию.
2. Поле «Тип оборудования» (показать наименование) — input-text/select.
3. Поле «Серийный номер» — input-text.
4. Поле «Примечание» — input-text/textarea.
5. Кнопки редактировать/сохранить/удалить в зависимости от выдранного режима
(просмотр/редактирование).

В качестве ui kit можно использовать любой готовый фреймворк/библиотеку.
Редактирование может быть реализовано как в целом всех полей, так и
отдельными полями.
Для всех форм обязательно наличие минимальной валидации данных на стороне
клиента.

**Выполненное задание**

## Настройка
1. Установка зависимостей:
   ```
   pip install -r requirements.txt
   ```
2. Импорт базы данных из дампа базы MySQL
    ```
    mysql -u [имя_нового_пользователя_бд] -p [имя_новой_бд] < backup.sql
    ```

## Запуск
   ```
   python manage.py runserver
   ```

## Логика
Приложение для backend использует Django, который на главной странице отображает SPA frontend сделанный на минимальном Vue.js. Для тестирования у админки пароль и логин admin:admin, а в оборудовании уже занесены тестовые данные. Требование было сделать проект минимальным, а не production ready. Полагаю, это именно то, что вы хотели увидеть.

## Примеры запросов
Вход в аккаунт
```
POST /api/user/login/

Body:
{
    "password": "admin",
    "username": "admin"
}
```


Получение текущего списка серийных номеров с пагинацией и с фильтрацией
```
GET /api/equipment/?page=1&equipment_type__name=TP-Link+TL-WR74

Response:
{
    "count": 12,
    "next": "http://127.0.0.1:8000/api/equipment/?page=2",
    "previous": null,
    "results": [
        {
            "id": 1,
            "equipment_type": {
                "id": 1,
                "name": "TP-Link TL-WR74",
                "serial_number_mask": "XXAAAAAXAA"
            },
            "serial_number": "1AABCDE9BC",
            "note": "Тестовый роутер 1",
            "is_deleted": false
        },
        {
            "id": 3,
            "equipment_type": {
                "id": 1,
                "name": "TP-Link TL-WR74",
                "serial_number_mask": "XXAAAAAXAA"
            },
            "serial_number": "2AABCDE9BC",
            "note": "123",
            "is_deleted": false
        },
        {
            "id": 4,
            "equipment_type": {
                "id": 1,
                "name": "TP-Link TL-WR74",
                "serial_number_mask": "XXAAAAAXAA"
            },
            "serial_number": "1AABCDE9BD",
            "note": "aaaaa",
            "is_deleted": false
        }...
    ]
}
```


Создание новой(ых) записи(ей) оборудования.
```
POST /api/equipment/

Body:
{
    "equipment_type_id": 1,
    "serial_numbers": ["SN001", "SN002", "SN003"],
    "note": "Test batch"
}
```
